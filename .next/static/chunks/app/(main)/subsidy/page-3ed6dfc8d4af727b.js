(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[657],{84238:function(e,t,s){Promise.resolve().then(s.bind(s,15598))},15598:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(84048),r=s(36397),l=s(35164),d=s(20132);function i(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(0),[i,o]=(0,r.useState)(0),[n,c]=(0,r.useState)(null),[x,h]=(0,r.useState)(!0),[m,p]=(0,r.useState)("");(0,r.useEffect)(()=>{u()},[]);let u=async()=>{h(!0);try{let e=await fetch("/api/subsidy");if(e.ok){let s=await e.json();t(s),d(s.reduce((e,t)=>e+(t.amount||0),0)),o(new Set(s.map(e=>e.familyID)).size);let a=s.reduce((e,t)=>(e[t.supportType]=(e[t.supportType]||0)+t.amount,e),{});c({labels:Object.keys(a),datasets:[{label:"Total Subsidy (৳)",data:Object.values(a),backgroundColor:["#e63946","#f4a261","#2a9d8f","#264653","#e76f51"],borderWidth:1,borderRadius:6}]})}else console.error("Failed to fetch subsidies")}catch(e){console.error("Error fetching subsidy data:",e)}finally{h(!1)}},y=e.filter(e=>e.headName.toLowerCase().includes(m.toLowerCase())||e.familyID.toString().includes(m)||e.supportType.toLowerCase().includes(m.toLowerCase()));return x?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-red-200 border-t-red-600 rounded-full animate-spin"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-red-600 mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Subsidy Distribution Dashboard"}),(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:"Monitoring and tracking subsidy allocation to families"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-red-600 to-red-700 rounded-xl shadow-lg p-6 text-white",children:[(0,a.jsx)("h2",{className:"text-lg font-medium opacity-90 mb-1",children:"Total Subsidy Given"}),(0,a.jsxs)("p",{className:"text-4xl font-bold",children:["৳",s.toLocaleString()]}),(0,a.jsx)("div",{className:"mt-4 h-1 bg-white bg-opacity-20 rounded-full",children:(0,a.jsx)("div",{className:"h-1 bg-white rounded-full",style:{width:"100%"}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-600 mb-1",children:"Total Families Helped"}),(0,a.jsx)("p",{className:"text-4xl font-bold text-gray-800",children:i}),(0,a.jsx)("div",{className:"mt-4 h-1 bg-gray-100 rounded-full",children:(0,a.jsx)("div",{className:"h-1 bg-red-500 rounded-full",style:{width:"70%"}})})]})]}),n&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-6 text-gray-800",children:"Subsidy Distribution by Type"}),(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(l.$Q,{data:n,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:15,usePointStyle:!0,font:{size:12}}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.9)",titleColor:"#111827",bodyColor:"#4B5563",bodyFont:{size:13},borderColor:"#E5E7EB",borderWidth:1,padding:12,boxPadding:6,usePointStyle:!0,callbacks:{label:function(e){return"৳".concat(e.raw.toLocaleString())}}}},scales:{y:{beginAtZero:!0,grid:{color:"#F3F4F6"},ticks:{color:"#6B7280",callback:function(e){return"৳"+e.toLocaleString()}},title:{display:!0,text:"Amount in ৳",color:"#4B5563",font:{size:12,weight:"500"}}},x:{grid:{display:!1},ticks:{color:"#6B7280"}}}}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2 md:mb-0",children:"Subsidy Records"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400",children:[(0,a.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,a.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, family ID or support type...",value:m,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gradient-to-r from-red-600 to-red-500 text-white",children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Support ID"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Family ID"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Head Name"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Contact"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Address"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Support Type"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right",children:"Amount (৳)"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Date Received"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:y.length>0?y.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-gray-800",children:e.supportID}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-800",children:e.familyID}),(0,a.jsx)("td",{className:"px-4 py-3 font-medium text-gray-800",children:e.headName}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.contact}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.address}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:e.supportType})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right font-medium text-gray-800",children:["৳",e.amount.toLocaleString()]}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-600",children:new Date(e.dateReceived).toLocaleDateString()})]},e.supportID)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"8",className:"px-4 py-8 text-center text-gray-500",children:"No matching subsidy records found."})})})]})})]}),(0,a.jsx)("div",{className:"mt-8 text-center text-sm text-gray-500",children:(0,a.jsx)("p",{children:"Confidential information - Access restricted to authorized personnel only"})})]})})}d.kL.register(...d.zX)}},function(e){e.O(0,[266,31,510,342,744],function(){return e(e.s=84238)}),_N_E=e.O()}]);