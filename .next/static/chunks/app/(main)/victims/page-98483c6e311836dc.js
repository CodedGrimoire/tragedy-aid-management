(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[842],{75551:function(e,s,r){Promise.resolve().then(r.bind(r,40750))},40750:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return n}});var a=r(84048),t=r(36397),l=r(42157);function n(){let e=(0,l.useRouter)(),[s,r]=(0,t.useState)([]),[n,i]=(0,t.useState)(!0),[d,o]=(0,t.useState)(null),[c,m]=(0,t.useState)(""),[h,x]=(0,t.useState)("All");(0,t.useEffect)(()=>{u()},[c,h]);let u=async()=>{try{i(!0);let e=await fetch("/api/victim".concat(c?"?search=".concat(encodeURIComponent(c)):""));if(!e.ok)throw Error("Failed to fetch victims");let s=await e.json(),a=Array.isArray(s)?s:[],t="All"===h?a:a.filter(e=>e.status===h);r(t)}catch(e){console.error("Error fetching victims:",e),o(e.message)}finally{i(!1)}},g=e=>{switch(e){case"Missing":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"Deceased":return"bg-gray-100 text-gray-800 border-gray-300";case"Injured":return"bg-orange-100 text-orange-800 border-orange-300";case"Found":return"bg-green-100 text-green-800 border-green-300";default:return"bg-blue-100 text-blue-800 border-blue-300"}},v=()=>{e.push("/victiminsert")};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Victim Registry"}),(0,a.jsxs)("button",{onClick:v,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg shadow transition-colors duration-200 flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add New Victim"]})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-md mb-6",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u()},className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by name, ID, or location...",value:c,onChange:e=>m(e.target.value),className:"w-full p-3 pl-10 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-black"}),(0,a.jsx)("div",{className:"absolute left-3 top-3 text-gray-400",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]})}),(0,a.jsx)("div",{className:"md:w-48",children:(0,a.jsxs)("select",{value:h,onChange:e=>x(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 bg-white text-black",children:[(0,a.jsx)("option",{value:"All",children:"All Statuses"}),(0,a.jsx)("option",{value:"Missing",children:"Missing"}),(0,a.jsx)("option",{value:"Deceased",children:"Deceased"}),(0,a.jsx)("option",{value:"Injured",children:"Injured"}),(0,a.jsx)("option",{value:"Found",children:"Found"}),(0,a.jsx)("option",{value:"Unknown",children:"Unknown"})]})}),(0,a.jsx)("button",{type:"submit",className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg shadow transition-colors duration-200",children:"Search"})]})}),n?(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-red-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-700",children:"Loading victims..."})]}),(0,a.jsx)("div",{className:"mt-6 space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg animate-pulse",children:[(0,a.jsx)("div",{className:"h-5 bg-gray-200 rounded w-1/4 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},s))})]}):d?(0,a.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Error loading victims: ",d]})}):0===s.length?(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-md text-center",children:[(0,a.jsx)("div",{className:"inline-block p-4 rounded-full bg-gray-100 mb-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No victims found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"No victims match your current search criteria or no records have been added yet."}),(0,a.jsxs)("button",{onClick:v,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow transition-colors duration-200 inline-flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add New Victim"]})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(e=>(0,a.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-200 border-l-4 border-red-500",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"ID:"})," ",e.birthCertificateNumber]})]}),e.status&&(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full border ".concat(g(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,a.jsxs)("p",{className:"text-gray-900",children:[(0,a.jsx)("span",{className:"font-medium",children:"Gender:"})," ","M"===e.gender?"Male":"F"===e.gender?"Female":"Other"]})]}),e.event&&(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500 mr-2 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Event:"}),(0,a.jsx)("p",{className:"text-gray-700",children:e.event.description}),e.event.date&&(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:new Date(e.event.date).toLocaleDateString()})]})]})]}),e.medical&&(0,a.jsxs)("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-100",children:[(0,a.jsxs)("h3",{className:"text-blue-800 font-semibold mb-2 flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Medical Information"]}),(0,a.jsxs)("div",{className:"space-y-1 text-gray-900",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Medical ID:"})," ",e.medical.medicalID]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Blood Group:"})," ",e.medical.bloodGroup||"N/A"]}),e.medical.medicalCondition&&(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Condition:"})," ",e.medical.medicalCondition]}),e.medical.dateOfBirth&&(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"DOB:"})," ",new Date(e.medical.dateOfBirth).toLocaleDateString()]}),e.medical.dateOfDeath&&(0,a.jsxs)("p",{className:"text-red-700",children:[(0,a.jsx)("span",{className:"font-medium",children:"Deceased:"})," ",new Date(e.medical.dateOfDeath).toLocaleDateString()]})]})]})]}),e.family&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-gray-800 font-semibold mb-1 flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Family Contact"]}),(0,a.jsxs)("p",{className:"text-gray-900",children:[(0,a.jsx)("span",{className:"font-medium",children:"Contact:"})," ",e.family.headName]}),e.family.contact&&(0,a.jsxs)("p",{className:"text-gray-900",children:[(0,a.jsx)("span",{className:"font-medium",children:"Phone:"})," ",e.family.contact]})]}),(0,a.jsx)("div",{className:"mt-4 flex justify-end",children:(0,a.jsx)("button",{className:"text-red-600 hover:text-blue-800 px-3 py-1 rounded-md hover:bg-blue-50 transition-colors duration-200 text-sm font-medium",children:"View Details"})})]},e.birthCertificateNumber))})]})})}},42157:function(e,s,r){"use strict";var a=r(45833);r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[510,342,744],function(){return e(e.s=75551)}),_N_E=e.O()}]);