(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[996],{89002:function(e,r,a){Promise.resolve().then(a.bind(a,33332))},33332:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return d}});var t=a(84048),s=a(36397);function d(){let[e,r]=(0,s.useState)([]),[a,d]=(0,s.useState)([]),[c,l]=(0,s.useState)(""),[i,n]=(0,s.useState)([]),[o,h]=(0,s.useState)(!0),[m,p]=(0,s.useState)({name:"",address:"",contact:""});(0,s.useEffect)(()=>{x()},[]);let x=async()=>{h(!0);try{let e=await fetch("/api/medical");if(e.ok){let a=await e.json();r(Array.isArray(a.victims)?a.victims:[]),d(Array.isArray(a.healthcareProviders)?a.healthcareProviders:[]),n(Array.isArray(a.victims)?a.victims:[])}else console.error("Failed to fetch victim healthcare records")}catch(e){console.error("Error fetching victim healthcare:",e)}finally{h(!1)}},u=async(e,r)=>{try{await fetch("/api/medical",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({victimID:e,providerID:r})}),x()}catch(e){console.error("Error updating healthcare provider:",e)}},y=async e=>{try{await fetch("/api/medical",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({victimID:e})}),x()}catch(e){console.error("Error removing healthcare provider:",e)}},v=async e=>{e.preventDefault();try{await fetch("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),p({name:"",address:"",contact:""}),x()}catch(e){console.error("Error adding healthcare provider:",e)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,t.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6 border-t-4 border-red-600",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-red-600",children:"Victim Healthcare Records"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage healthcare associations"})]}),(0,t.jsx)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:(0,t.jsx)("input",{type:"text",placeholder:"Search by victim's name...",value:c,onChange:r=>{let a=r.target.value.toLowerCase();l(a),n(e.filter(e=>e.victimName.toLowerCase().includes(a)))},className:"w-full pl-4 pr-4 py-3 border border-gray-300 rounded-lg"})}),(0,t.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:o?(0,t.jsx)("div",{className:"flex justify-center items-center p-12",children:(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-red-200 border-t-red-600 rounded-full animate-spin"})}):(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-red-600 text-white",children:[(0,t.jsx)("th",{className:"px-6 py-4",children:"Victim Name"}),(0,t.jsx)("th",{className:"px-6 py-4",children:"Healthcare Provider"}),(0,t.jsx)("th",{className:"px-6 py-4",children:"Services Provided"}),(0,t.jsx)("th",{className:"px-6 py-4",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:i.length>0?i.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:e.victimName}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("select",{value:e.providerID||"",onChange:r=>u(e.victimID,r.target.value),className:"border rounded-lg px-2 py-1",children:[(0,t.jsx)("option",{value:"",children:"None"}),a.map(e=>(0,t.jsx)("option",{value:e.providerID,children:e.name},e.providerID))]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.description}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("button",{onClick:()=>y(e.victimID),className:"text-red-600",children:"Remove"})})]},e.victimID)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"4",className:"px-6 py-12 text-center text-gray-500",children:"No records found."})})})]})}),(0,t.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mt-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Healthcare Provider"}),(0,t.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Name",value:m.name,onChange:e=>p({...m,name:e.target.value}),className:"border rounded-lg px-4 py-2 w-full",required:!0}),(0,t.jsx)("input",{type:"text",placeholder:"Address",value:m.address,onChange:e=>p({...m,address:e.target.value}),className:"border rounded-lg px-4 py-2 w-full",required:!0}),(0,t.jsx)("input",{type:"text",placeholder:"Contact",value:m.contact,onChange:e=>p({...m,contact:e.target.value}),className:"border rounded-lg px-4 py-2 w-full",required:!0}),(0,t.jsx)("button",{type:"submit",className:"bg-red-600 text-white px-4 py-2 rounded-lg",children:"Add Provider"})]})]})]})})}}},function(e){e.O(0,[510,342,744],function(){return e(e.s=89002)}),_N_E=e.O()}]);