(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{88934:function(e,t,o){Promise.resolve().then(o.bind(o,53920)),Promise.resolve().then(o.bind(o,95699)),Promise.resolve().then(o.bind(o,96661))},53920:function(e,t,o){"use strict";o.d(t,{AuthProvider:function(){return s}});var r=o(84048),a=o(36397),n=o(42157);let l=(0,a.createContext)(null);function s(e){let{children:t}=e,[o,s]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0),u=(0,n.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("auth_token");if(e)try{let t=await fetch("/api/validate-token",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();s(e.user)}else localStorage.removeItem("auth_token"),s(null)}catch(e){console.error("Auth validation error:",e),localStorage.removeItem("auth_token"),s(null)}}catch(e){console.error("localStorage may not be available:",e)}finally{c(!1)}})()},[]);let h=async(e,t)=>{try{let o=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await o.json();if(!o.ok)throw Error(r.error||"Login failed");return localStorage.setItem("auth_token",r.token),s(r.user),{success:!0}}catch(e){return{success:!1,error:e.message}}},f=async e=>{try{let t=await fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await t.json();if(!t.ok)throw Error(o.error||"Signup failed");return localStorage.setItem("auth_token",o.token),s(o.user),{success:!0}}catch(e){return{success:!1,error:e.message}}},g=async()=>{try{await fetch("/api/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}})}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("auth_token"),s(null),u.push("/login")}};return(0,r.jsx)(l.Provider,{value:{user:o,login:h,signup:f,logout:g,loading:i},children:t})}}},function(e){e.O(0,[550,478,510,342,744],function(){return e(e.s=88934)}),_N_E=e.O()}]);