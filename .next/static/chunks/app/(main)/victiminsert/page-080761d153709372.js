(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{79051:function(e,t,a){Promise.resolve().then(a.bind(a,81449))},81449:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var s=a(84048),c=a(65603),d=a.n(c),r=a(36397),i=a(42157);function l(){let e=(0,i.useRouter)(),[t,a]=(0,r.useState)(!1),[c,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)(""),[m,x]=(0,r.useState)(1),[f,u]=(0,r.useState)(!1),[h,j]=(0,r.useState)(!1),[g,b]=(0,r.useState)({date:"",description:"",location:""}),[p,y]=(0,r.useState)({medicalID:"",dateOfBirth:"",dateOfDeath:"",medicalCondition:"",bloodGroup:""}),[v,N]=(0,r.useState)({headName:"",contact:"",address:""}),[w,D]=(0,r.useState)({birthCertificateNumber:"",name:"",gender:"",status:""}),[k,C]=(0,r.useState)({event:{},medical:{},family:{},victim:{}}),S=["Hospital A","Hospital B","City Center","Main Street","Central Park","Downtown","North District","South District","East District","West District"],I=e=>{let t={...k},a=!0;if((1===e||0===e)&&(t.event={},g.date||(t.event.date="Event date is required",a=!1),g.location&&""!==g.location.trim()||(t.event.location="Location is required",a=!1),g.description&&""!==g.description.trim()?g.description.length<10&&(t.event.description="Description must be at least 10 characters",a=!1):(t.event.description="Description is required",a=!1)),2!==e&&0!==e||(t.victim={},w.name&&""!==w.name.trim()||(t.victim.name="Name is required",a=!1),w.birthCertificateNumber&&""!==w.birthCertificateNumber.trim()?isNaN(parseInt(w.birthCertificateNumber,10))&&(t.victim.birthCertificateNumber="Birth certificate number must be numeric",a=!1):(t.victim.birthCertificateNumber="Birth certificate number is required",a=!1),w.gender||(t.victim.gender="Gender is required",a=!1)),(3===e||0===e)&&(t.medical={},p.medicalID&&""!==p.medicalID.trim()||(t.medical.medicalID="Medical ID is required",a=!1),p.dateOfBirth&&p.dateOfDeath)){let e=new Date(p.dateOfBirth);new Date(p.dateOfDeath)<e&&(t.medical.dateOfDeath="Date of death cannot be before date of birth",a=!1)}return 4!==e&&0!==e||(t.family={},v.headName&&""!==v.headName.trim()||(t.family.headName="Head name is required",a=!1),v.contact&&""!==v.contact.trim()?/^\d{10,15}$/.test(v.contact.replace(/[^0-9]/g,""))||(t.family.contact="Please enter a valid contact number (10-15 digits)",a=!1):(t.family.contact="Contact is required",a=!1),v.address&&""!==v.address.trim()||(t.family.address="Address is required",a=!1)),C(t),a},O=()=>{if(h){let e=new Date(new Date);e.setDate(e.getDate()-1),b({date:e.toISOString().split("T")[0],description:"Natural disaster affected the area causing multiple casualties",location:"North District, Building 7"}),D({birthCertificateNumber:Math.floor(1e7+9e7*Math.random()).toString(),name:"John Doe",gender:"M",status:"Injured"}),y({medicalID:L(),dateOfBirth:"1985-06-15",dateOfDeath:"",medicalCondition:"Multiple fractures, stable condition",bloodGroup:"O+"}),N({headName:"Jane Doe",contact:"123-456-7890",address:"123 Main St, Apartment 4B, North District"})}else T()};(0,r.useEffect)(()=>{O()},[h]);let[B,M]=(0,r.useState)([]),[E,z]=(0,r.useState)({}),[A,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{fetch("/api/medicals").then(e=>e.json()).then(e=>{M(e),z(e.reduce((e,t)=>{let a=t.bloodGroup||"Unknown";return e[a]=(e[a]||0)+1,e},{}))}).catch(e=>console.error("Error fetching medical records:",e))},[]);let L=()=>{let e=Date.now().toString().slice(-6),t=Math.floor(1e3*Math.random()).toString().padStart(3,"0"),a="".concat("MED").concat(e).concat(t);return B.some(e=>e.medicalID===a)?L():a};(0,r.useEffect)(()=>{if(p.medicalID){let e=B.some(e=>e.medicalID===p.medicalID);if(F(e),e){let e=B.find(e=>e.medicalID===p.medicalID),t=e=>e?new Date(e).toISOString().split("T")[0]:"";y({...p,dateOfBirth:t(e.dateOfBirth),dateOfDeath:t(e.dateOfDeath),bloodGroup:e.bloodGroup||"",medicalCondition:e.medicalCondition||""})}}else F(!1)},[p.medicalID,B]);let G=async e=>{if(e.preventDefault(),!I(0)){o("Please correct all errors before submitting.");return}a(!0),o("");try{var t,s,c;console.log("Submitting medical data:",p);let e=await fetch("/api/medicals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"upsert",medicalID:p.medicalID,dateOfBirth:p.dateOfBirth||null,dateOfDeath:p.dateOfDeath||null,bloodGroup:p.bloodGroup||null,medicalCondition:p.medicalCondition||null})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to create medical record")}let a=await e.json();console.log("Medical record created/updated:",a),console.log("Submitting family data:",v);let d=await fetch("/api/family",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({headName:v.headName,contact:v.contact,address:v.address})});if(!d.ok){let e=await d.json();throw Error(e.error||"Failed to create family record")}let r=await d.json();console.log("Family record created:",r),console.log("Submitting event data:",g);let i=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:g.date?new Date(g.date).toISOString():null,description:g.description,location:g.location})});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to create event record")}let n=await i.json();console.log("Event record created:",n);let o=a.medicalID||(null===(t=a.medical)||void 0===t?void 0:t.medicalID)||p.medicalID,m=n.eventID||(null===(s=n.event)||void 0===s?void 0:s.eventID),x=r.familyID||(null===(c=r.family)||void 0===c?void 0:c.familyID),f={birthCertificateNumber:parseInt(w.birthCertificateNumber,10),name:w.name,gender:w.gender,status:w.status||null,medicalID:o,eventID:m,familyID:x};console.log("Submitting victim data:",f);let u=await fetch("/api/victim",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),h=await u.text();if(console.log("Victim response status:",u.status),console.log("Victim response text:",h),!u.ok){let e="Failed to create victim record";try{let t=JSON.parse(h);e=t.error||e,t.details&&(e+=": ".concat(t.details))}catch(e){console.error("Error parsing error response:",e)}throw Error(e)}l(!0),console.log("All records created successfully!")}catch(e){console.error("Error submitting form:",e),o(e.message||"An error occurred during submission. Please try again.")}finally{a(!1)}},T=()=>{b({date:"",description:"",location:""}),y({medicalID:L(),dateOfBirth:"",dateOfDeath:"",medicalCondition:"",bloodGroup:""}),N({headName:"",contact:"",address:""}),D({birthCertificateNumber:"",name:"",gender:"",status:""}),l(!1),x(1),o(""),C({event:{},medical:{},family:{},victim:{}}),u(!1)},[q,V]=(0,r.useState)([]),[H,P]=(0,r.useState)(!1),W=e=>{b({...g,location:e}),P(!1)};return(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center p-4",children:[c?(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c bg-white shadow-lg rounded-lg p-8 max-w-lg w-full text-center animate-fade-in",children:[(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c mb-4 text-green-500",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-fd0939c2649d372c h-16 w-16 mx-auto",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7",className:"jsx-fd0939c2649d372c"})})}),(0,s.jsx)("h2",{className:"jsx-fd0939c2649d372c text-2xl font-bold mb-2 text-gray-800",children:"Form Submitted Successfully"}),(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-gray-600 mb-6",children:"The victim information has been recorded in the database."}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex flex-col sm:flex-row justify-center space-y-3 sm:space-y-0 sm:space-x-3",children:[(0,s.jsx)("button",{onClick:T,className:"jsx-fd0939c2649d372c px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Add Another Victim"}),(0,s.jsx)("button",{onClick:()=>e.push("/victims"),className:"jsx-fd0939c2649d372c px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition duration-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50",children:"View All Victims"})]})]}):(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c bg-white shadow-xl rounded-lg p-8 max-w-2xl w-full space-y-8 animate-fade-in",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c border-b pb-4",children:[(0,s.jsx)("h2",{className:"jsx-fd0939c2649d372c text-3xl font-bold text-center text-gray-800",children:"Victim Information"}),(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-center text-gray-500 mt-2",children:"Please fill in all required fields marked with *"}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex flex-col sm:flex-row justify-between mt-4",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex items-center mb-2 sm:mb-0",children:[(0,s.jsx)("input",{type:"checkbox",id:"autoFill",checked:h,onChange:()=>j(!h),className:"jsx-fd0939c2649d372c w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,s.jsx)("label",{htmlFor:"autoFill",className:"jsx-fd0939c2649d372c ml-2 text-sm font-medium text-gray-700",children:"Auto-fill with sample data"})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex flex-col sm:flex-row items-center",children:[(0,s.jsx)("span",{className:"jsx-fd0939c2649d372c mb-2 sm:mb-0 sm:mr-4 text-sm font-medium text-gray-700",children:B.length>0?"".concat(B.length," medical records in database"):"Loading medical records..."}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c text-sm font-medium text-gray-700",children:["Step ",m," of 4"]})]})]}),(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c w-full bg-gray-200 rounded-full h-2.5 mt-3",children:(0,s.jsx)("div",{style:{width:"".concat(m/4*100,"%")},className:"jsx-fd0939c2649d372c bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-in-out"})})]}),n&&(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c bg-red-50 text-red-700 p-4 rounded-md border border-red-200",children:(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"jsx-fd0939c2649d372c h-5 w-5 mr-2",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd",className:"jsx-fd0939c2649d372c"})}),(0,s.jsx)("span",{className:"jsx-fd0939c2649d372c",children:n})]})}),(0,s.jsxs)("form",{onSubmit:G,className:"jsx-fd0939c2649d372c",children:[1===m&&(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-4 animate-fade-in",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex items-center",children:[(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-fd0939c2649d372c h-5 w-5 text-blue-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",className:"jsx-fd0939c2649d372c"})})}),(0,s.jsx)("h3",{className:"jsx-fd0939c2649d372c text-xl font-semibold text-gray-800",children:"Event Details"})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Event Date*"}),(0,s.jsx)("input",{type:"date",value:g.date,onChange:e=>{b({...g,date:e.target.value}),f&&I(1)},max:new Date().toISOString().split("T")[0],className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.event.date?"border-red-500":"border-gray-300"," rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),k.event.date&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.event.date})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2 relative",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Location*"}),(0,s.jsx)("input",{type:"text",placeholder:"Where did it happen?",value:g.location,onChange:e=>{let t=e.target.value;if(b({...g,location:t}),t.length>1){let e=S.filter(e=>e.toLowerCase().includes(t.toLowerCase()));V(e),P(e.length>0)}else P(!1);f&&I(1)},onFocus:()=>{g.location&&q.length>0&&P(!0)},onBlur:()=>{setTimeout(()=>P(!1),200)},className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.event.location?"border-red-500":"border-gray-300"," rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),k.event.location&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.event.location}),H&&(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:q.map((e,t)=>(0,s.jsx)("div",{onMouseDown:()=>W(e),className:"jsx-fd0939c2649d372c p-2 hover:bg-gray-100 cursor-pointer text-black",children:e},t))})]})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Description*"}),(0,s.jsx)("textarea",{placeholder:"Brief description of the event",rows:"3",value:g.description,onChange:e=>{b({...g,description:e.target.value}),f&&I(1)},className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.event.description?"border-red-500":"border-gray-300"," rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),k.event.description&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.event.description})]})]}),2===m&&(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-4 animate-fade-in",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex items-center",children:[(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mr-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-fd0939c2649d372c h-5 w-5 text-purple-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",className:"jsx-fd0939c2649d372c"})})}),(0,s.jsx)("h3",{className:"jsx-fd0939c2649d372c text-xl font-semibold text-gray-800",children:"Victim Details"})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Name*"}),(0,s.jsx)("input",{type:"text",placeholder:"Full name",value:w.name,onChange:e=>{D({...w,name:e.target.value}),f&&I(2)},className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.victim.name?"border-red-500":"border-gray-300"," rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),k.victim.name&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.victim.name})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Birth Certificate Number*"}),(0,s.jsx)("input",{type:"text",placeholder:"Certificate ID (numeric only)",value:w.birthCertificateNumber,onChange:e=>{let t=e.target.value.replace(/\D/g,"");D({...w,birthCertificateNumber:t}),f&&I(2)},className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.victim.birthCertificateNumber?"border-red-500":"border-gray-300"," rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),k.victim.birthCertificateNumber&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.victim.birthCertificateNumber})]})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Gender*"}),(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c flex space-x-4",children:[{value:"M",label:"Male"},{value:"F",label:"Female"},{value:"O",label:"Other"}].map(e=>(0,s.jsxs)("label",{className:"jsx-fd0939c2649d372c inline-flex items-center",children:[(0,s.jsx)("input",{type:"radio",name:"gender",value:e.value,checked:w.gender===e.value,onChange:()=>{D({...w,gender:e.value}),f&&I(2)},className:"jsx-fd0939c2649d372c form-radio h-4 w-4 text-blue-600"}),(0,s.jsx)("span",{className:"jsx-fd0939c2649d372c ml-2 text-black",children:e.label})]},e.value))}),k.victim.gender&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.victim.gender})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Status"}),(0,s.jsxs)("select",{value:w.status,onChange:e=>D({...w,status:e.target.value}),className:"jsx-fd0939c2649d372c w-full p-3 border border-gray-300 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200",children:[(0,s.jsx)("option",{value:"",className:"jsx-fd0939c2649d372c",children:"Select Status"}),["Missing","Deceased","Injured","Found","Unknown"].map(e=>(0,s.jsx)("option",{value:e,className:"jsx-fd0939c2649d372c",children:e},e))]})]})]})]}),3===m&&(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-4 animate-fade-in",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex items-center",children:[(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c w-10 h-10 rounded-full bg-red-100 flex items-center justify-center mr-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-fd0939c2649d372c h-5 w-5 text-red-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z",className:"jsx-fd0939c2649d372c"})})}),(0,s.jsx)("h3",{className:"jsx-fd0939c2649d372c text-xl font-semibold text-gray-800",children:"Medical Details"})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Medical ID*"}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex",children:[(0,s.jsx)("input",{type:"text",placeholder:"Medical record identifier",value:p.medicalID,onChange:e=>{y({...p,medicalID:e.target.value}),f&&I(3)},required:!0,className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.medical.medicalID?"border-red-500":A?"border-green-500":"border-gray-300"," rounded-l-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),(0,s.jsx)("button",{type:"button",onClick:()=>y({...p,medicalID:L()}),title:"Generate new Medical ID",className:"jsx-fd0939c2649d372c px-3 py-3 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-r-md border border-l-0 border-gray-300",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"jsx-fd0939c2649d372c h-5 w-5",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd",className:"jsx-fd0939c2649d372c"})})})]}),A&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-green-600 text-xs mt-1",children:"Existing record found - details auto-filled"}),k.medical.medicalID&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.medical.medicalID})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Blood Group"}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsxs)("select",{value:p.bloodGroup,onChange:e=>y({...p,bloodGroup:e.target.value}),className:"jsx-fd0939c2649d372c w-full p-3 border border-gray-300 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200",children:[(0,s.jsx)("option",{value:"",className:"jsx-fd0939c2649d372c",children:"Select Blood Group"}),["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(e=>(0,s.jsx)("option",{value:e,className:"jsx-fd0939c2649d372c",children:e},e))]}),Object.keys(E).length>0&&(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c mt-2 text-xs text-gray-500",children:[(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c",children:"Current distribution in database:"}),(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c flex flex-wrap mt-1 gap-2",children:Object.entries(E).map(e=>{let[t,a]=e;return(0,s.jsxs)("span",{className:"jsx-fd0939c2649d372c "+"px-2 py-1 rounded-full ".concat(t===p.bloodGroup?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:[t,": ",a]},t)})})]})]})]})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Date of Birth"}),(0,s.jsx)("input",{type:"date",value:p.dateOfBirth,onChange:e=>{y({...p,dateOfBirth:e.target.value}),f&&I(3)},max:new Date().toISOString().split("T")[0],className:"jsx-fd0939c2649d372c w-full p-3 border border-gray-300 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200"})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Date of Death"}),(0,s.jsx)("input",{type:"date",value:p.dateOfDeath,onChange:e=>{y({...p,dateOfDeath:e.target.value}),f&&I(3)},max:new Date().toISOString().split("T")[0],className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.medical.dateOfDeath?"border-red-500":"border-gray-300"," rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),k.medical.dateOfDeath&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.medical.dateOfDeath})]})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Medical Condition"}),(0,s.jsx)("textarea",{placeholder:"Any relevant medical conditions",rows:"2",value:p.medicalCondition,onChange:e=>y({...p,medicalCondition:e.target.value}),className:"jsx-fd0939c2649d372c w-full p-3 border border-gray-300 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200"})]})]}),4===m&&(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-4 animate-fade-in",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex items-center",children:[(0,s.jsx)("div",{className:"jsx-fd0939c2649d372c w-10 h-10 rounded-full bg-green-100 flex items-center justify-center mr-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-fd0939c2649d372c h-5 w-5 text-green-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",className:"jsx-fd0939c2649d372c"})})}),(0,s.jsx)("h3",{className:"jsx-fd0939c2649d372c text-xl font-semibold text-gray-800",children:"Family Details"})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Head of Family*"}),(0,s.jsx)("input",{type:"text",placeholder:"Name of family head",value:v.headName,onChange:e=>{N({...v,headName:e.target.value}),f&&I(4)},className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.family.headName?"border-red-500":"border-gray-300"," rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),k.family.headName&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.family.headName})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Contact Number*"}),(0,s.jsx)("input",{type:"tel",placeholder:"Emergency contact",value:v.contact,onChange:e=>{N({...v,contact:e.target.value}),f&&I(4)},className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.family.contact?"border-red-500":"border-gray-300"," rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),k.family.contact&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.family.contact})]})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c space-y-2",children:[(0,s.jsx)("label",{className:"jsx-fd0939c2649d372c block text-sm font-medium text-gray-700",children:"Family Address*"}),(0,s.jsx)("textarea",{placeholder:"Complete address",rows:"2",value:v.address,onChange:e=>{N({...v,address:e.target.value}),f&&I(4)},className:"jsx-fd0939c2649d372c "+"w-full p-3 border ".concat(k.family.address?"border-red-500":"border-gray-300"," rounded-md text-black focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200")}),k.family.address&&(0,s.jsx)("p",{className:"jsx-fd0939c2649d372c text-red-500 text-xs mt-1",children:k.family.address})]})]}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c pt-6 flex flex-col sm:flex-row justify-between space-y-3 sm:space-y-0",children:[m>1&&(0,s.jsx)("button",{type:"button",onClick:()=>{x(e=>e-1)},className:"jsx-fd0939c2649d372c px-6 py-3 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-400 transition duration-200",children:"Back"}),(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 sm:ml-auto",children:[(0,s.jsx)("button",{type:"button",onClick:T,className:"jsx-fd0939c2649d372c px-6 py-3 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-400 transition duration-200",children:"Reset Form"}),m<4?(0,s.jsx)("button",{type:"button",onClick:()=>{I(m)?x(e=>e+1):u(!0)},className:"jsx-fd0939c2649d372c px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:"Next"}):(0,s.jsx)("button",{type:"submit",disabled:t,className:"jsx-fd0939c2649d372c "+"px-6 py-3 rounded-md text-white transition duration-200 ".concat(t?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"),children:t?(0,s.jsxs)("div",{className:"jsx-fd0939c2649d372c flex items-center justify-center",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"jsx-fd0939c2649d372c animate-spin -ml-1 mr-2 h-4 w-4 text-white",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-fd0939c2649d372c opacity-25"}),(0,s.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-fd0939c2649d372c opacity-75"})]}),"Submitting..."]}):"Submit Information"})]})]})]})]}),(0,s.jsx)(d(),{id:"fd0939c2649d372c",children:"@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);-moz-transform:translatey(10px);-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.animate-fade-in.jsx-fd0939c2649d372c{-webkit-animation:fadeIn.5s ease-out;-moz-animation:fadeIn.5s ease-out;-o-animation:fadeIn.5s ease-out;animation:fadeIn.5s ease-out}"})]})}}},function(e){e.O(0,[582,510,342,744],function(){return e(e.s=79051)}),_N_E=e.O()}]);