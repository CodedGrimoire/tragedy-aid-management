(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{43203:function(e,t,r){Promise.resolve().then(r.bind(r,38146))},38146:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(84048),s=r(36397),i=r(64914),d=r(31219),n=r(16154),c=r(7717),l=r(87625),o=r(29882);function h(){let[e,t]=(0,s.useState)([]),[r,h]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await fetch("/api/tragedies");if(!e.ok)throw Error("Failed to fetch tragedies");let r=await e.json();t(r)}catch(e){console.error("Error fetching tragedies:",e)}finally{x(!1)}},y=async e=>{if(confirm("Are you sure you want to delete this tragedy?"))try{if(!(await fetch("/api/tragedies?tragedyID=".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete tragedy");g(),h(null)}catch(e){console.error("Error deleting tragedy:",e)}},u=async()=>{let e=prompt("Enter the name of the new tragedy:");if(e)try{if(!(await fetch("/api/tragedies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tragedyName:e})})).ok)throw Error("Failed to add tragedy");g()}catch(e){console.error("Error adding tragedy:",e)}};return m?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-red-200 border-t-red-600 rounded-full animate-spin"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("header",{className:"mb-10",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("button",{className:"px-4 py-2 bg-orange-600 text-white rounded-md",onClick:u,children:"Add New Tragedy"})}),(0,a.jsx)("div",{className:"mb-10",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-red-600 to-red-700 rounded-xl shadow-lg p-6 text-white",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold",children:"Tragedies Dashboard"}),(0,a.jsx)("p",{className:"text-gray-100",children:"Analyzing critical incidents"})]})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(e=>(0,a.jsxs)("div",{className:"p-5 rounded-lg ".concat((null==r?void 0:r.tragedyID)===e.tragedyID?"border-2 border-red-500 bg-red-50":"bg-white border border-gray-200"),children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:e.tragedyName}),(0,a.jsx)("button",{className:"text-sm text-red-600 hover:text-red-800",onClick:()=>y(e.tragedyID),children:"Delete"})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("button",{className:"text-gray-600 text-sm",onClick:()=>h(e),children:[e.totalVictims," victims (Click for details)"]})})]},e.tragedyID))}),r&&(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)(i.h,{width:"100%",height:300,children:(0,a.jsxs)(d.v,{data:r.eventVictimData,children:[(0,a.jsx)(n.K,{dataKey:"eventID"}),(0,a.jsx)(c.B,{}),(0,a.jsx)(l.u,{}),(0,a.jsx)(o.$,{dataKey:"victims",fill:"#dc2626"})]})}),(0,a.jsx)("div",{className:"mt-4",children:r.eventVictimData.map(e=>(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,a.jsxs)("strong",{children:["Event ",e.eventID,":"]})," ",e.description]},e.eventID))})]})]})})}}},function(e){e.O(0,[682,219,510,342,744],function(){return e(e.s=43203)}),_N_E=e.O()}]);