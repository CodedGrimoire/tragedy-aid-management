"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{95699:function(e,t,r){r.r(t),r.d(t,{default:function(){return s}});var n=r(84048),a=r(36397),l=r(42157),o=r(35890);function s(){(0,l.useRouter)();let[e,t]=(0,a.useState)(!1),[r,s]=(0,a.useState)(null),[i,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{d()},[]);let d=async()=>{try{console.log("Checking user authentication...");let e=localStorage.getItem("auth_token");if(!e){console.log("No token found, setting user as NOT logged in."),t(!1),s(null),c(null);return}let r=await fetch("/api/me",{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},credentials:"include"});if(r.ok){let e=await r.json();console.log("User details:",e),t(!0),s(e.role),c(e.name)}else console.error("Invalid session, logging out..."),u()}catch(e){console.error("Error checking authentication:",e),t(!1),s(null),c(null)}},u=async()=>{try{(await fetch("/api/logout",{method:"POST"})).ok?(console.log("Logout successful. Clearing session..."),localStorage.removeItem("auth_token"),document.cookie="auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",t(!1),s(null),c(null),window.location.href="/login"):alert("Logout failed, please try again.")}catch(e){console.error("Error logging out:",e),alert("Logout failed, please try again.")}};return(0,n.jsx)("nav",{className:"bg-white shadow-sm",children:(0,n.jsx)("div",{className:"max-w-full mx-4 px-4",children:(0,n.jsxs)("div",{className:"flex justify-between h-20",children:[(0,n.jsx)("div",{className:"flex-shrink-0 flex items-center"}),(0,n.jsxs)("div",{className:"flex items-center space-x-3 pr-4",children:[e&&(0,n.jsxs)(n.Fragment,{children:["ADMIN"===r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.default,{href:"/victiminsert",className:"text-gray-600 hover:text-gray-900 text-sm px-3 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",children:"Data Entry"}),(0,n.jsx)(o.default,{href:"/crud",className:"text-gray-600 hover:text-gray-900 text-sm px-3 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",children:"Modify"})]}),(0,n.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Welcome, ",i||"User"]}),(0,n.jsx)("button",{onClick:u,className:"px-3 py-1.5 border border-gray-300 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-50 text-sm",children:"Logout"})]}),!e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.default,{href:"/login",className:"px-3 py-1.5 border border-gray-300 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-50 text-sm",children:"Login"}),(0,n.jsx)(o.default,{href:"/signup",className:"px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",children:"Sign Up"})]})]})]})})})}},96661:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var n=r(84048),a=r(36397),l=r(35890),o=r(42157);let s=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}),i=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}),c=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}),d=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}),u=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),m=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}),h=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}),f=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}),x=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}),g=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))});function w(){return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-red-50 rounded-lg",children:(0,n.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",className:"text-red-600",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M12 3L4 7V17L12 21L20 17V7L12 3Z",fill:"currentColor",fillOpacity:"0.1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M12 8V16M8 12H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"text-xl font-bold text-gray-900 font-bengali tracking-wide",children:"উদ্ধার"})})]})}function v(){let e=(0,o.usePathname)(),[t,r]=(0,a.useState)(!1),[v,p]=(0,a.useState)(!1),[b,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=()=>{p(window.innerWidth<1024),window.innerWidth<1024&&r(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let k=[{name:"Dashboard",icon:s,href:"/"},{name:"Victim Summary",icon:i,href:"/victimsummary"},{name:"Victims",icon:c,href:"/victims"},{name:"Events",icon:d,href:"/events"},{name:"FamilySupport",icon:i,href:"/families"},{name:"FamilySupportSummary",icon:i,href:"/subsidy"},{name:"Subsidy",icon:u,href:"/gsubsidy"},{name:"NGOs",icon:m,href:"/ngos"},{name:"Medical",icon:h,href:"/medical"},{name:"Tragedies",icon:f,href:"/tragedies"}],y=()=>j(!b),N=t=>e===t||e.startsWith("".concat(t,"/"));return(0,n.jsxs)(n.Fragment,{children:[v&&b&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20",onClick:y}),(0,n.jsx)("button",{onClick:v?y:()=>r(!t),className:"fixed top-4 z-40 bg-red-600 text-white p-2 rounded-full shadow-lg\n    ".concat(v?b?"left-64 -mr-4":"left-4":t?"left-20 -mr-4":"left-64 -mr-4"),"aria-label":t||v&&!b?"Expand sidebar":"Collapse sidebar",children:t||v&&!b?(0,n.jsx)(x,{className:"h-5 w-5"}):(0,n.jsx)(g,{className:"h-5 w-5"})}),(0,n.jsxs)("div",{className:"bg-white shadow-xl h-screen fixed top-0 left-0 z-30 transition-all duration-300 ease-in-out\n    ".concat(v?b?"translate-x-0 w-64":"-translate-x-full w-64":t?"w-20":"w-64"),children:[(0,n.jsx)("div",{className:"py-6 border-b border-red-100",children:(0,n.jsx)("div",{className:"flex ".concat(t?"justify-center":"px-6"," items-center"),children:!t&&(0,n.jsx)("div",{className:"ml-3",children:(0,n.jsx)(w,{})})})}),(0,n.jsx)("div",{className:"py-4",children:(0,n.jsx)("div",{className:t?"px-2":"px-4",children:(0,n.jsx)("nav",{className:"space-y-1",children:k.map(e=>(0,n.jsxs)(l.default,{href:e.href,className:"flex items-center ".concat(t?"justify-center":"px-3"," py-3 rounded-lg text-sm font-medium transition-colors duration-150 ").concat(N(e.href)?"bg-red-50 text-red-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,n.jsx)(e.icon,{className:"".concat(N(e.href)?"text-red-600":"text-gray-400"," h-6 w-6 ").concat(!t&&"mr-3")}),!t&&e.name,N(e.href)&&t&&(0,n.jsx)("span",{className:"absolute left-0 w-1 h-6 bg-red-600 rounded-r-md"})]},e.name))})})}),(0,n.jsx)("div",{className:"absolute bottom-0 w-full border-t border-red-100 p-4",children:(0,n.jsxs)("div",{className:"flex ".concat(t?"justify-center":""," items-center"),children:[(0,n.jsx)("div",{className:"h-8 w-8 rounded-full bg-red-100 flex items-center justify-center",children:(0,n.jsx)(c,{className:"h-4 w-4 text-red-600"})}),!t&&(0,n.jsxs)("div",{className:"ml-3",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:"Admin User"}),(0,n.jsx)("a",{href:"#",className:"text-xs font-medium text-red-600 hover:text-red-900",children:"View profile"})]})]})})]}),(0,n.jsx)("div",{className:"transition-all duration-300 ".concat(v?"ml-0":t?"ml-20":"ml-64")})]})}}}]);