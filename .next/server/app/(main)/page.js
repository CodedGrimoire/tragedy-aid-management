(()=>{var e={};e.id=7974,e.ids=[7974],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},58845:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),t(73851),t(36104),t(80867),t(5607);var a=t(44257),i=t(69184),r=t(42259),n=t.n(r),l=t(70057),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c=["",{children:["(main)",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,73851)),"/Users/tazkia/Desktop/Uddhar/app/(main)/page.js"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,36104)),"/Users/tazkia/Desktop/Uddhar/app/(main)/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,80867,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,49810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,5607)),"/Users/tazkia/Desktop/Uddhar/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,80867,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,49810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/Users/tazkia/Desktop/Uddhar/app/(main)/page.js"],m="/(main)/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},84512:(e,s,t)=>{Promise.resolve().then(t.bind(t,80289))},80289:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(24495),i=t(33247),r=t(88828),n=t(46451),l=t(11835),d=t(67424),c=t(68258),o=t(89320),m=t(9645),x=t(70393),h=t(59227);function p(){let[e,s]=(0,i.useState)([]),[t,r]=(0,i.useState)(!0);if(t)return a.jsx("div",{className:"animate-pulse",children:"Loading..."});let h=e=>e.length>15?`${e.slice(0,15)}...`:e,p=e.map(e=>({name:h(e.description),fullName:e.description,victims:e.victimCount||0}));return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"mb-16",children:[" ",a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Victims per Event"}),(0,a.jsxs)("div",{className:"h-72",children:[" ",a.jsx(l.h,{width:"100%",height:"100%",children:(0,a.jsxs)(d.v,{data:p,margin:{bottom:50},children:[" ",a.jsx(c.K,{dataKey:"name",angle:-30,textAnchor:"end",interval:0,tick:a.jsx(u,{})}),a.jsx(o.B,{}),a.jsx(m.u,{content:({payload:e})=>e&&0!==e.length?(0,a.jsxs)("div",{className:"bg-white p-2 shadow-md rounded",children:[a.jsx("p",{className:"font-semibold",children:e[0].payload.fullName}),(0,a.jsxs)("p",{children:["Victims: ",e[0].value]})]}):null}),a.jsx(x.$,{dataKey:"victims",fill:"#dc2626"})]})})]})]}),(0,a.jsxs)("div",{className:"mt-12 px-6 py-4 border-b border-gray-200",children:[" ",a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Tragic Events"})]}),a.jsx("div",{className:"divide-y divide-gray-200",children:e.map(e=>a.jsx(n.default,{href:`/events/${e.eventID}`,className:"block hover:bg-gray-50 transition-colors duration-150",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-tragic-700",children:e.description}),(0,a.jsxs)("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[(0,a.jsxs)("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.location]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[a.jsx("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.date?new Date(e.date).toLocaleDateString():"N/A"]})]}),a.jsx("div",{className:"ml-6",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-tragic-100 text-tragic-800",children:[e.victimCount||0," victims"]})})]}),a.jsx("div",{className:"mt-4",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-support-600",children:[a.jsx("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"View details and manage assistance"]})})]})},e.eventID))})]})}let u=e=>{let{x:s,y:t,payload:i}=e;return a.jsx(h.x,{x:s,y:t,dy:10,textAnchor:"end",angle:-30,fill:"#333",children:i.value})};function v(){let[e,s]=(0,i.useState)([]),[t,r]=(0,i.useState)(!0),[l,d]=(0,i.useState)(null);return t?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Victims"})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"flex space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},s))})})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Victims"}),a.jsx(n.default,{href:"/victims",className:"text-sm text-red-600 hover:text-red-800",children:"View all"})]}),a.jsx("div",{className:"p-6",children:0===e.length?a.jsx("p",{className:"text-center text-gray-500",children:"No victims recorded yet"}):a.jsx("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx("span",{className:"text-red-600 font-medium",children:e.name?.charAt(0)||"?"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.event&&a.jsx("p",{className:"text-sm text-gray-500 truncate",children:e.event.description})]}),a.jsx("div",{children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"Active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status})})]},e.birthCertificateNumber))})})]})}function g({stats:e,loading:s}){return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-tragic-50 rounded-lg p-6 border border-tragic-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-tragic-100",children:a.jsx("svg",{className:"h-6 w-6 text-tragic-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("h2",{className:"text-lg font-medium text-tragic-900",children:"Total Victims"}),a.jsx("p",{className:"mt-1 text-3xl font-semibold text-tragic-700",children:s?"...":e.totalVictims})]})]})}),a.jsx("div",{className:"bg-support-50 rounded-lg p-6 border border-support-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-support-100",children:a.jsx("svg",{className:"h-6 w-6 text-support-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("h2",{className:"text-lg font-medium text-support-900",children:"Families Assisted"}),a.jsx("p",{className:"mt-1 text-3xl font-semibold text-support-700",children:s?"...":e.supportedFamilies})]})]})}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-gray-100",children:a.jsx("svg",{className:"h-6 w-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Active Events"}),a.jsx("p",{className:"mt-1 text-3xl font-semibold text-gray-700",children:s?"...":e.activeEvents})]})]})})]})}function j(){(0,r.useRouter)();let[e,s]=(0,i.useState)({totalVictims:0,activeEvents:0,supportedFamilies:0}),[t,n]=(0,i.useState)(!0),[l,d]=(0,i.useState)(new Date().toLocaleString()),[c,o]=(0,i.useState)(!1),m=async()=>{try{n(!0);let e=await fetch("/api/dashboard");if(!e.ok)throw Error("Failed to fetch statistics");let t=await e.json();s(t)}catch(e){console.error("Error fetching dashboard stats:",e)}finally{n(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 relative",children:[a.jsx("div",{className:"flex",children:(0,a.jsxs)("main",{className:"flex-1 p-6",children:[(0,a.jsxs)("div",{className:"mb-10",children:[" ",a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tragic Events Monitoring"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Track and manage assistance for victims of tragic incidents"})]}),a.jsx("div",{className:"mb-14",children:a.jsx(g,{stats:e,loading:t})}),(0,a.jsxs)("div",{className:"mt-14 grid grid-cols-1 lg:grid-cols-3 gap-12",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"min-h-[400px] overflow-auto",children:a.jsx(p,{className:"break-words whitespace-normal py-3 min-h-[80px]"})})}),a.jsx("div",{children:a.jsx(v,{onVictimAdded:m})})]})]})}),(0,a.jsxs)("div",{className:"absolute top-20 right-4 text-sm font-normal text-gray-900 bg-opacity-70 bg-white p-2 rounded-lg shadow-md",children:[l.split(",")[0],a.jsx("br",{}),l.split(",")[1]]})]})}},73851:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(19670).createProxy)(String.raw`/Users/tazkia/Desktop/Uddhar/app/(main)/page.js#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[9576,6846,8755,4504,3424,7424,8482],()=>t(58845));module.exports=a})();