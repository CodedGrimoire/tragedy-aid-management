(()=>{var e={};e.id=5901,e.ids=[5901],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},30955:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>d.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>l}),r(44697),r(36104),r(80867),r(5607);var a=r(44257),s=r(69184),i=r(42259),d=r.n(i),n=r(70057),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let l=["",{children:["(main)",{children:["tragedies",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44697)),"/Users/tazkia/Desktop/Uddhar/app/(main)/tragedies/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,36104)),"/Users/tazkia/Desktop/Uddhar/app/(main)/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,80867,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,49810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,5607)),"/Users/tazkia/Desktop/Uddhar/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,80867,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,49810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/tazkia/Desktop/Uddhar/app/(main)/tragedies/page.js"],m="/(main)/tragedies/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/tragedies/page",pathname:"/tragedies",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},29973:(e,t,r)=>{Promise.resolve().then(r.bind(r,98217))},98217:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(24495),s=r(33247),i=r(11835),d=r(67424),n=r(68258),o=r(89320),l=r(9645),c=r(70393);function m(){let[e,t]=(0,s.useState)([]),[r,m]=(0,s.useState)(null),[p,h]=(0,s.useState)(!0),g=async()=>{try{let e=await fetch("/api/tragedies");if(!e.ok)throw Error("Failed to fetch tragedies");let r=await e.json();t(r)}catch(e){console.error("Error fetching tragedies:",e)}finally{h(!1)}},x=async e=>{if(confirm("Are you sure you want to delete this tragedy?"))try{if(!(await fetch(`/api/tragedies?tragedyID=${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete tragedy");g(),m(null)}catch(e){console.error("Error deleting tragedy:",e)}},u=async()=>{let e=prompt("Enter the name of the new tragedy:");if(e)try{if(!(await fetch("/api/tragedies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tragedyName:e})})).ok)throw Error("Failed to add tragedy");g()}catch(e){console.error("Error adding tragedy:",e)}};return p?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"w-16 h-16 border-4 border-red-200 border-t-red-600 rounded-full animate-spin"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("header",{className:"mb-10",children:[a.jsx("div",{className:"mb-6",children:a.jsx("button",{className:"px-4 py-2 bg-orange-600 text-white rounded-md",onClick:u,children:"Add New Tragedy"})}),a.jsx("div",{className:"mb-10",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-red-600 to-red-700 rounded-xl shadow-lg p-6 text-white",children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Tragedies Dashboard"}),a.jsx("p",{className:"text-gray-100",children:"Analyzing critical incidents"})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(e=>(0,a.jsxs)("div",{className:`p-5 rounded-lg ${r?.tragedyID===e.tragedyID?"border-2 border-red-500 bg-red-50":"bg-white border border-gray-200"}`,children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800",children:e.tragedyName}),a.jsx("button",{className:"text-sm text-red-600 hover:text-red-800",onClick:()=>x(e.tragedyID),children:"Delete"})]}),a.jsx("div",{className:"mt-2",children:(0,a.jsxs)("button",{className:"text-gray-600 text-sm",onClick:()=>m(e),children:[e.totalVictims," victims (Click for details)"]})})]},e.tragedyID))}),r&&(0,a.jsxs)("div",{className:"mt-10",children:[a.jsx(i.h,{width:"100%",height:300,children:(0,a.jsxs)(d.v,{data:r.eventVictimData,children:[a.jsx(n.K,{dataKey:"eventID"}),a.jsx(o.B,{}),a.jsx(l.u,{}),a.jsx(c.$,{dataKey:"victims",fill:"#dc2626"})]})}),a.jsx("div",{className:"mt-4",children:r.eventVictimData.map(e=>(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,a.jsxs)("strong",{children:["Event ",e.eventID,":"]})," ",e.description]},e.eventID))})]})]})})}},44697:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(19670).createProxy)(String.raw`/Users/tazkia/Desktop/Uddhar/app/(main)/tragedies/page.js#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9576,6846,8755,4504,3424,7424,8482],()=>r(30955));module.exports=a})();