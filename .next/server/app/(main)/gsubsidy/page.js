(()=>{var e={};e.id=7725,e.ids=[7725],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},85737:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>l}),i(85007),i(36104),i(80867),i(5607);var s=i(44257),a=i(69184),r=i(42259),n=i.n(r),d=i(70057),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);i.d(t,o);let l=["",{children:["(main)",{children:["gsubsidy",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,85007)),"/Users/tazkia/Desktop/Uddhar/app/(main)/gsubsidy/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,36104)),"/Users/tazkia/Desktop/Uddhar/app/(main)/layout.js"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,80867,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,49810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,5607)),"/Users/tazkia/Desktop/Uddhar/app/layout.js"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,80867,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,49810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/tazkia/Desktop/Uddhar/app/(main)/gsubsidy/page.js"],c="/(main)/gsubsidy/page",m={require:i,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/gsubsidy/page",pathname:"/gsubsidy",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},27773:(e,t,i)=>{Promise.resolve().then(i.bind(i,67560))},67560:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var s=i(24495),a=i(33247),r=i(11835),n=i(66418),d=i(8392),o=i(84699),l=i(9645),u=i(91057);let c=["#e63946","#457b9d"];function m(){let[e,t]=(0,a.useState)([]),[i,m]=(0,a.useState)([]),[p,h]=(0,a.useState)({}),[b,y]=(0,a.useState)({}),[x,g]=(0,a.useState)(!0),[f,v]=(0,a.useState)({}),[j,N]=(0,a.useState)({medicalCondition:"",amount:"",eligibility:""}),[C,w]=(0,a.useState)(!1),S=async()=>{g(!0);try{let e=await fetch("/api/gsubsidy");if(!e.ok)throw Error("Failed to fetch victims");let i=await e.json();t(i.victims),m(i.subsidyOptions),h(i.stats)}catch(e){console.error("Error fetching victims:",e)}finally{g(!1)}},P=async e=>{if(b[e]){v({...f,[e]:!0});try{if(!(await fetch("/api/gsubsidy",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({birthCertificateNumber:e,subsidyID:b[e]})})).ok)throw Error("Failed to assign subsidy");await S()}catch(e){console.error("Error assigning subsidy:",e)}finally{v({...f,[e]:!1})}}},k=async()=>{if(j.medicalCondition&&j.amount&&j.eligibility){w(!0);try{if(!(await fetch("/api/gsubsidy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok)throw Error("Failed to add subsidy");N({medicalCondition:"",amount:"",eligibility:""}),await S()}catch(e){console.error("Error adding subsidy:",e)}finally{w(!1)}}};return x?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"w-16 h-16 border-4 border-red-200 border-t-red-600 rounded-full animate-spin"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Victim Subsidy Dashboard"}),s.jsx(r.h,{width:"100%",height:300,children:(0,s.jsxs)(n.u,{children:[s.jsx(d.b,{data:[{name:"Subsidy Recipients",value:p.recipientsCount},{name:"Non-Recipients",value:p.nonRecipientsCount}],dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:!0,children:c.map((e,t)=>s.jsx(o.b,{fill:e},t))}),s.jsx(l.u,{}),s.jsx(u.D,{})]})}),s.jsx("h2",{className:"text-2xl font-semibold mt-6",children:"Victim List"}),e.map(e=>(0,s.jsxs)("div",{className:"bg-white shadow-md p-4 rounded-md my-4",children:[(0,s.jsxs)("h2",{className:"text-xl",children:[e.name," (#",e.birthCertificateNumber,")"]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Subsidy: ",e.receivedSubsidy?`✅ (ID: ${e.subsidyID})`:"❌ No Subsidy"]}),!e.receivedSubsidy&&(0,s.jsxs)("div",{className:"mt-2",children:[s.jsx("label",{className:"text-gray-700",children:"Assign Subsidy:"}),(0,s.jsxs)("select",{className:"ml-2 px-3 py-2 border rounded-md",value:b[e.birthCertificateNumber]||"",onChange:t=>y({...b,[e.birthCertificateNumber]:parseInt(t.target.value)}),children:[s.jsx("option",{value:"",children:"Select Subsidy"}),i.map(e=>(0,s.jsxs)("option",{value:e.subsidyID,children:[e.medicalCondition," ($",e.amount,")"]},e.subsidyID))]}),s.jsx("button",{onClick:()=>P(e.birthCertificateNumber),disabled:f[e.birthCertificateNumber],className:"ml-2 px-4 py-2 rounded-md bg-red-600 text-white hover:bg-blue-700 transition-colors",children:f[e.birthCertificateNumber]?"Assigning...":"Assign"})]})]},e.birthCertificateNumber)),s.jsx("h2",{className:"text-2xl font-semibold mt-6",children:"Add New Subsidy"}),(0,s.jsxs)("div",{className:"mt-4 bg-white p-4 shadow-md rounded-md",children:[s.jsx("input",{type:"text",placeholder:"Medical Condition",value:j.medicalCondition,onChange:e=>N({...j,medicalCondition:e.target.value}),className:"border p-2 mr-2 rounded-md"}),s.jsx("input",{type:"number",placeholder:"Amount",value:j.amount,onChange:e=>N({...j,amount:parseFloat(e.target.value)}),className:"border p-2 mr-2 rounded-md"}),s.jsx("input",{type:"text",placeholder:"Eligibility",value:j.eligibility,onChange:e=>N({...j,eligibility:e.target.value}),className:"border p-2 mr-2 rounded-md"}),s.jsx("button",{onClick:k,disabled:C,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-green-700 transition-colors",children:C?"Adding...":"Add Subsidy"})]})]})})}},85007:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});let s=(0,i(19670).createProxy)(String.raw`/Users/tazkia/Desktop/Uddhar/app/(main)/gsubsidy/page.js#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[9576,6846,8755,4504,3424,6418,8482],()=>i(85737));module.exports=s})();