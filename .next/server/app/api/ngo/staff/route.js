"use strict";(()=>{var e={};e.id=1561,e.ids=[1561],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},36590:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>f});var n=r(36126),a=r(69184),i=r(36197),o=r(53524),u=r(81602);let p=new o.PrismaClient;async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("ngoID"),s=t.get("role"),n=t.get("isActive"),a=t.get("specialization"),i=t.get("name"),o={where:{...r&&{ngoID:parseInt(r)},...s&&{role:{contains:s,mode:"insensitive"}},...null!==n&&{isActive:"true"===n},...a&&{specialization:{contains:a,mode:"insensitive"}},...i&&{name:{contains:i,mode:"insensitive"}}},include:{ngo:{select:{name:!0}},_count:{select:{serviceRequests:!0,serviceDeliveryLogs:!0}}},orderBy:{name:"asc"}},c=await p.NGO_Staff.findMany(o);return u.NextResponse.json(c)}catch(e){return console.error("Error fetching staff members:",e),u.NextResponse.json({error:"Failed to fetch staff members",details:e.message},{status:500})}}async function f(e){try{let{ngoID:t,name:r,role:s,contact:n,email:a,specialization:i}=await e.json();if(!t||!r||!s)return u.NextResponse.json({error:"Missing required fields"},{status:400});if(isNaN(parseInt(t)))return u.NextResponse.json({error:"Invalid NGO ID"},{status:400});if(!await p.NGO.findUnique({where:{ngoID:parseInt(t)}}))return u.NextResponse.json({error:"NGO not found"},{status:404});if(a&&await p.NGO_Staff.findUnique({where:{email:a}}))return u.NextResponse.json({error:"Email is already in use"},{status:400});let o=await p.NGO_Staff.create({data:{ngoID:parseInt(t),name:r,role:s,...n&&{contact:n},...a&&{email:a},...i&&{specialization:i},isActive:!0}});return u.NextResponse.json(o,{status:201})}catch(e){return console.error("Error creating staff member:",e),u.NextResponse.json({error:"Failed to create staff member",details:e.message},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/ngo/staff/route",pathname:"/api/ngo/staff",filename:"route",bundlePath:"app/api/ngo/staff/route"},resolvedPagePath:"/Users/tazkia/Desktop/Uddhar/app/api/ngo/staff/route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:g}=d,v="/api/ngo/staff/route";function x(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9576,4946],()=>r(36590));module.exports=s})();